{"version":3,"sources":["core.js"],"names":["HTTP_STATUS_NOT_FOUND","HTTP_STATUS_SUCCESS","Core","config","request","paramExcludes","concat","Request","options","doc","callback","err","utils","optionsUndefined","promiseRejectOrCallback","index","getIndexSyntax","type","getTypeSyntax","query","exclude","path","pathAppend","_id","create","_create","put","post","commands","Error","serializedCommands","forEach","command","documents","action","document","_index","_type","hasOwnProperty","push","bulk","get","delete","statusCode","once","context","state","head","data","exists","promiseResolveOrCallback","docs","id","multiGet","includeSource","_source","add","missingIndex","missingType","self","queries","serializedQueries","scrollId","scroll","suggest","script","module","exports"],"mappings":"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","sourcesContent":["import * as utils from './utils';\nimport { Request } from 'reqlib';\n\nconst\n\tHTTP_STATUS_NOT_FOUND = 404,\n\tHTTP_STATUS_SUCCESS = 200;\n\nclass Core {\n\tconstructor (config, request) {\n\t\tthis.config = config;\n\t\tthis.paramExcludes = Object\n\t\t\t.keys(config)\n\t\t\t.concat(['_create', '_id', '_index', '_indices', '_source', '_type', '_types']);\n\t\tthis.request = request || new Request(config);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/index_/\n\t// .add to ease backwards compatibility\n\tadd (options = {}, doc, callback) {\n\t\tif (!callback && typeof doc === 'function') {\n\t\t\tcallback = doc;\n\t\t\tdoc = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where options are not provided\n\t\tif (!doc) {\n\t\t\tdoc = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index', '_type']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\toptions._id,\n\t\t\t(options.create || options._create) ? '_create' : '');\n\n\t\tif (options._id) {\n\t\t\treturn this.request.put(options, doc, callback);\n\t\t} else {\n\t\t\treturn this.request.post(options, doc, callback);\n\t\t}\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/bulk/\n\t// Note: Formats input queries as follows in POST data:\n\t//\n\t// { header : {} } \\n\n\t// { data : {} } \\n\n\t// { header : {} } \\n\n\t// { data : {} } \\n\n\t//\n\tbulk (options = {}, commands, callback) {\n\t\tif (!callback && typeof commands === 'function') {\n\t\t\tcallback = commands;\n\t\t\tcommands = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where options are not provided\n\t\tif (!commands) {\n\t\t\tcommands = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tif (!Array.isArray(commands)) {\n\t\t\treturn utils.promiseRejectOrCallback(\n\t\t\t\tnew Error('commands provided must be in array format'),\n\t\t\t\tcallback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, null), // specifically don't want default settings\n\t\t\tserializedCommands = '',\n\t\t\ttype = utils.getTypeSyntax(options, null);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\t(index ? type : null),\n\t\t\t'_bulk');\n\n\t\tcommands.forEach((command) => {\n\t\t\tserializedCommands += JSON.stringify(command) + '\\n';\n\t\t});\n\n\t\treturn this.request.post(options, serializedCommands, callback);\n\t}\n\n\t// convenience method for bulk that specifies index action\n\t// and automatically creates appropriate action/meta entries\n\t// for the documents passed\n\tbulkIndex (options = {}, documents, callback) {\n\t\tif (!callback && typeof documents === 'function') {\n\t\t\tcallback = documents;\n\t\t\tdocuments = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where options are not provided\n\t\tif (!documents) {\n\t\t\tdocuments = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tif (!Array.isArray(documents)) {\n\t\t\treturn utils.promiseRejectOrCallback(\n\t\t\t\tnew Error('documents provided must be in array format'),\n\t\t\t\tcallback);\n\t\t}\n\n\t\tlet\n\t\t\taction = {},\n\t\t\tcommands = [],\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\tdocuments.forEach((document) => {\n\t\t\taction = {\n\t\t\t\tindex : {\n\t\t\t\t\t_index : index,\n\t\t\t\t\t_type : type\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// fix for issue #28, ability to handle _id property on document\n\t\t\tif (document.hasOwnProperty('_id')) {\n\t\t\t\taction.index._id = document._id;\n\t\t\t\tdelete document._id;\n\t\t\t}\n\n\t\t\tcommands.push(action);\n\t\t\tcommands.push(document);\n\t\t});\n\n\t\treturn this.bulk(options, commands, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/count/\n\tcount (options = {}, query, callback) {\n\t\tif (!callback && typeof query === 'function') {\n\t\t\tcallback = query;\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tif (!callback && !query && typeof options === 'function') {\n\t\t\tcallback = options;\n\t\t\tquery = null;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// correct situation if count is called without a query\n\t\tif (query && !query.query) {\n\t\t\toptions = query;\n\t\t\tquery = null;\n\t\t}\n\n\t\t// look for scenarios where options are omitted\n\t\tif (!query && options.query) {\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\t(index ? type : null),\n\t\t\t'_count');\n\n\t\tif (query) {\n\t\t\treturn this.request.post(options, query, callback);\n\t\t} else {\n\t\t\treturn this.request.get(options, callback);\n\t\t}\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/delete/\n\tdelete (options = {}, callback) {\n\t\tif (!callback && typeof options === 'function') {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\toptions._id);\n\n\t\treturn this.request.delete(options, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/delete-by-query/\n\tdeleteByQuery (options = {}, query, callback) {\n\t\tif (!callback && typeof query === 'function') {\n\t\t\tcallback = query;\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where options are not provided\n\t\tif (!query) {\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\t'_query');\n\n\t\treturn this.request.delete(options, query, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/get/\n\texists (options = {}, callback) {\n\t\tif (!callback && typeof options === 'function') {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\tstatusCode,\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(index, type, options._id);\n\n\t\tthis.request.once('response', (context) => (statusCode = context.state.statusCode));\n\n\t\treturn this.request.head(options, (err, data) => {\n\t\t\tif (err) {\n\t\t\t\tif (err.statusCode && err.statusCode === HTTP_STATUS_NOT_FOUND) {\n\t\t\t\t\tdata = {\n\t\t\t\t\t\texists : false,\n\t\t\t\t\t\tstatusCode : err.statusCode\n\t\t\t\t\t};\n\n\t\t\t\t\treturn utils.promiseResolveOrCallback(data, callback);\n\t\t\t\t}\n\n\t\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t\t}\n\n\t\t\t// must listen to event...\n\t\t\tdata = {\n\t\t\t\texists : statusCode === HTTP_STATUS_SUCCESS\n\t\t\t};\n\n\t\t\treturn utils.promiseResolveOrCallback(data, callback);\n\t\t});\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/explain/\n\texplain (options = {}, query, callback) {\n\t\tif (!callback && typeof query === 'function') {\n\t\t\tcallback = query;\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index', '_type', '_id']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\toptions._id,\n\t\t\t'_explain');\n\n\t\t// documentation indicates GET method...\n\t\t// sending POST data via GET not typical, using POST instead\n\t\treturn this.request.post(options, query, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/get/\n\tget (options = {}, callback) {\n\t\tif (!callback && typeof options === 'function') {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index', '_type', '_id']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tif (Array.isArray(options._id)) {\n\t\t\tlet docs = [];\n\n\t\t\toptions._id.forEach((id) => {\n\t\t\t\tdocs.push({\n\t\t\t\t\t_id : id\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn this.multiGet(options, docs, callback);\n\t\t}\n\n\t\tlet\n\t\t\tincludeSource = options._source && options._source !== false,\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\toptions._id,\n\t\t\tincludeSource ? '_source' : null);\n\n\t\t// optionally add source filters if _source is not a boolean value\n\t\tif (includeSource && typeof options._source !== 'boolean') {\n\t\t\toptions.query._source = options._source;\n\t\t}\n\n\t\treturn this.request.get(options, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/index_/\n\t// .add to ease backwards compatibility\n\tindex (...args) {\n\t\treturn this.add(...args);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/more-like-this/\n\tmoreLikeThis (options = {}, callback) {\n\t\tif (!callback && typeof options === 'function') {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index', '_type', '_id']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\toptions._id,\n\t\t\t'_mlt');\n\n\t\treturn this.request.get(options, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/multi-get/\n\tmultiGet (options = {}, docs, callback) {\n\t\tif (!callback && typeof docs === 'function') {\n\t\t\tcallback = docs;\n\t\t\tdocs = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tif (!callback && typeof options === 'function') {\n\t\t\tcallback = options;\n\t\t\tdocs = null;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where options are not provided\n\t\tif (!docs && Array.isArray(options)) {\n\t\t\tdocs = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet\n\t\t\tmissingIndex = false,\n\t\t\tmissingType = false,\n\t\t\tself = this;\n\n\t\tdocs.forEach((doc) => {\n\t\t\tdoc._index = doc._index || options._index || self.config._index || null;\n\t\t\tdoc._type = doc._type || options._type || self.config._type || null;\n\n\t\t\tif (!doc._index || doc._index === null) {\n\t\t\t\tmissingIndex = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!doc._type) {\n\t\t\t\tmissingType = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\tif (missingIndex) {\n\t\t\treturn utils.promiseRejectOrCallback(\n\t\t\t\tnew Error('at least 1 or more docs supplied is missing index'),\n\t\t\t\tcallback);\n\t\t}\n\n\t\tif (missingType) {\n\t\t\treturn utils.promiseRejectOrCallback(\n\t\t\t\tnew Error('at least 1 or more docs supplied is missing type'),\n\t\t\t\tcallback);\n\t\t}\n\n\t\toptions.path = utils.pathAppend('_mget');\n\n\t\t// documentation indicates GET method...\n\t\t// sending POST data via GET not typical, using POST instead\n\t\treturn this.request.post(options, { docs }, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/multi-search/\n\t// Note: Formats input queries as follows in POST data:\n\t//\n\t// { query : {} } \\n\n\t// { query : {} } \\n\n\t// { query : {} } \\n\n\t//\n\tmultiSearch (options = {}, queries, callback) {\n\t\tif (!callback && typeof queries === 'function') {\n\t\t\tcallback = queries;\n\t\t\tqueries = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where options are not provided\n\t\tif (!queries && Array.isArray(options)) {\n\t\t\tqueries = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tif (!Array.isArray(queries)) {\n\t\t\treturn utils.promiseRejectOrCallback(\n\t\t\t\tnew Error('queries provided must be in array format'),\n\t\t\t\tcallback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, null), // specifically want to exclude defaults\n\t\t\tserializedQueries = '',\n\t\t\ttype = utils.getTypeSyntax(options, null);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\tindex ? type : null,\n\t\t\t'_msearch');\n\n\t\tqueries.forEach((query) => {\n\t\t\tserializedQueries += JSON.stringify(query);\n\t\t\tserializedQueries += '\\n';\n\t\t});\n\n\t\t// documentation indicates GET method...\n\t\t// sending POST data via GET not typical, using POST instead\n\t\treturn this.request.post(options, serializedQueries, callback);\n\t}\n\n\tquery (options = {}, query, callback) {\n\t\tif (!callback && typeof query === 'function') {\n\t\t\tcallback = query;\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where only the query is provided\n\t\tif (!query) {\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\t'_search');\n\n\t\t// documentation indicates GET method...\n\t\t// sending POST data via GET not typical, using POST instead\n\t\treturn this.request.post(options, query, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/search/\n\t// .query to ease backwards compatibility\n\tsearch (...args) {\n\t\treturn this.query(...args);\n\t}\n\n\t// http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-scroll.html\n\tscroll (options = {}, scrollId, callback) {\n\t\tif (!callback && typeof scrollId === 'function') {\n\t\t\tcallback = scrollId;\n\t\t\tscrollId = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['scroll']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\t\toptions.path = utils.pathAppend('_search/scroll');\n\n\t\t// re-map to payload expected by ES6\n\t\tif (typeof scrollId === 'string') {\n\t\t\tscrollId = {\n\t\t\t\tscroll : options.scroll,\n\t\t\t\t'scroll_id' : scrollId\n\t\t\t};\n\t\t}\n\n\t\t// documentation indicates GET method...\n\t\t// sending POST data via GET not typical, using POST instead\n\t\treturn this.request.post(options, scrollId, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/search/term-suggest/\n\t// fix for issue #29\n\tsuggest (options = {}, query, callback) {\n\t\tif (!callback && typeof query === 'function') {\n\t\t\tcallback = query;\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// check for scenarios where options are not provided\n\t\tif (!query && options.suggest) {\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\t// NOTE: in 5.0 _suggest deprecated in favor of _search endpoint\n\t\t// https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters.html\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\t'_search');\n\n\t\treturn this.request.post(options, query, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/update/\n\tupdate (options = {}, doc, callback) {\n\t\tif (!callback && typeof doc === 'function') {\n\t\t\tcallback = doc;\n\t\t\tdoc = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// attempt to account for missing options\n\t\tif (!doc && (options.script || options.doc)) {\n\t\t\tdoc = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index', '_type', '_id']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\t// fix for #36 - script can be blank, but not missing\n\t\tif ((doc.script === null || typeof doc.script === 'undefined') && !doc.doc) {\n\t\t\treturn utils.promiseRejectOrCallback(\n\t\t\t\tnew Error('script or doc is required for update operation'),\n\t\t\t\tcallback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\toptions._id,\n\t\t\t'_update');\n\n\t\treturn this.request.post(options, doc, callback);\n\t}\n\n\t// http://www.elasticsearch.org/guide/reference/api/validate/\n\tvalidate (options = {}, query, callback) {\n\t\tif (!callback && typeof query === 'function') {\n\t\t\tcallback = query;\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\t// handle scenarios where options are not provided\n\t\tif (!query && options.query) {\n\t\t\tquery = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tlet err = utils.optionsUndefined(options, this.config, ['_index']);\n\n\t\tif (err) {\n\t\t\treturn utils.promiseRejectOrCallback(err, callback);\n\t\t}\n\n\t\tlet\n\t\t\tindex = utils.getIndexSyntax(options, this.config),\n\t\t\ttype = utils.getTypeSyntax(options, this.config);\n\n\t\toptions.query = utils.exclude(options, this.paramExcludes);\n\n\t\toptions.path = utils.pathAppend(\n\t\t\tindex,\n\t\t\ttype,\n\t\t\t'_validate/query');\n\n\t\t// documentation indicates GET method...\n\t\t// sending POST data via GET not typical, using POST instead\n\t\treturn this.request.post(options, query, callback);\n\t}\n}\n\nmodule.exports = { Core };\n"],"file":"core.js"}